var data = {
    "data": [{
            "timestamp": 1609459200000,
            "open": 373.88,
            "high": 373.88,
            "low": 373.88,
            "close": 373.88,
            "volume": 0
        },
        {
            "timestamp": 1609718400000,
            "open": 375.31,
            "high": 375.45,
            "low": 364.82,
            "close": 368.79,
            "volume": 110210800
        },
        {
            "timestamp": 1609804800000,
            "open": 368.1,
            "high": 372.5,
            "low": 368.05,
            "close": 371.33,
            "volume": 66426200
        },
        {
            "timestamp": 1609891200000,
            "open": 369.71,
            "high": 376.98,
            "low": 369.12,
            "close": 373.55,
            "volume": 107997600
        },
        {
            "timestamp": 1609977600000,
            "open": 376.1,
            "high": 379.9,
            "low": 375.91,
            "close": 379.1,
            "volume": 68766800
        },
        {
            "timestamp": 1610064000000,
            "open": 380.59,
            "high": 381.49,
            "low": 377.1,
            "close": 381.26,
            "volume": 71677200
        },
        {
            "timestamp": 1610323200000,
            "open": 377.85,
            "high": 380.58,
            "low": 377.7189,
            "close": 378.69,
            "volume": 51176700
        },
        {
            "timestamp": 1610409600000,
            "open": 378.89,
            "high": 379.86,
            "low": 376.36,
            "close": 378.77,
            "volume": 52547700
        },
        {
            "timestamp": 1610496000000,
            "open": 378.69,
            "high": 380.86,
            "low": 377.85,
            "close": 379.79,
            "volume": 45303600
        },
        {
            "timestamp": 1610582400000,
            "open": 380.59,
            "high": 381.13,
            "low": 378.1,
            "close": 378.46,
            "volume": 49989100
        },
        {
            "timestamp": 1610668800000,
            "open": 376.72,
            "high": 377.58,
            "low": 373.7,
            "close": 375.7,
            "volume": 107159900
        },
        {
            "timestamp": 1610928000000,
            "open": 375.7,
            "high": 375.7,
            "low": 375.7,
            "close": 375.7,
            "volume": 0
        },
        {
            "timestamp": 1611014400000,
            "open": 378.34,
            "high": 379.23,
            "low": 376.75,
            "close": 378.65,
            "volume": 51095000
        },
        {
            "timestamp": 1611100800000,
            "open": 381.11,
            "high": 384.79,
            "low": 380.69,
            "close": 383.89,
            "volume": 61836000
        },
        {
            "timestamp": 1611187200000,
            "open": 384.49,
            "high": 384.95,
            "low": 383.25,
            "close": 384.24,
            "volume": 47899600
        },
        {
            "timestamp": 1611273600000,
            "open": 382.25,
            "high": 384.1256,
            "low": 381.835,
            "close": 382.88,
            "volume": 52136900
        },
        {
            "timestamp": 1611532800000,
            "open": 383.67,
            "high": 384.77,
            "low": 378.46,
            "close": 384.39,
            "volume": 70324100
        },
        {
            "timestamp": 1611619200000,
            "open": 385.41,
            "high": 385.85,
            "low": 383.54,
            "close": 383.79,
            "volume": 42665200
        },
        {
            "timestamp": 1611705600000,
            "open": 380.22,
            "high": 380.32,
            "low": 372.01,
            "close": 374.41,
            "volume": 123211900
        },
        {
            "timestamp": 1611792000000,
            "open": 376.36,
            "high": 381.93,
            "low": 375.89,
            "close": 377.63,
            "volume": 94118000
        },
        {
            "timestamp": 1611878400000,
            "open": 375.63,
            "high": 376.67,
            "low": 368.27,
            "close": 370.07,
            "volume": 126697200
        },
        {
            "timestamp": 1612137600000,
            "open": 373.72,
            "high": 377.34,
            "low": 370.38,
            "close": 376.23,
            "volume": 75759400
        },
        {
            "timestamp": 1612224000000,
            "open": 379.65,
            "high": 383.22,
            "low": 376.3181,
            "close": 381.55,
            "volume": 64208500
        },
        {
            "timestamp": 1612310400000,
            "open": 382.43,
            "high": 383.7,
            "low": 380.48,
            "close": 381.85,
            "volume": 52230900
        },
        {
            "timestamp": 1612396800000,
            "open": 382.96,
            "high": 386.24,
            "low": 381.9655,
            "close": 386.19,
            "volume": 47087900
        },
        {
            "timestamp": 1612483200000,
            "open": 388.2,
            "high": 388.47,
            "low": 386.1444,
            "close": 387.71,
            "volume": 48646700
        },
        {
            "timestamp": 1612742400000,
            "open": 389.27,
            "high": 390.56,
            "low": 388.35,
            "close": 390.51,
            "volume": 38164300
        },
        {
            "timestamp": 1612828800000,
            "open": 389.61,
            "high": 390.89,
            "low": 389.17,
            "close": 390.25,
            "volume": 35541100
        },
        {
            "timestamp": 1612915200000,
            "open": 392.12,
            "high": 392.28,
            "low": 387.5,
            "close": 390.08,
            "volume": 59078400
        },
        {
            "timestamp": 1613001600000,
            "open": 391.24,
            "high": 391.69,
            "low": 388.1,
            "close": 390.71,
            "volume": 42876000
        },
        {
            "timestamp": 1613088000000,
            "open": 389.85,
            "high": 392.9,
            "low": 389.77,
            "close": 392.64,
            "volume": 50576300
        },
        {
            "timestamp": 1613347200000,
            "open": 392.64,
            "high": 392.64,
            "low": 392.64,
            "close": 392.64,
            "volume": 0
        },
        {
            "timestamp": 1613433600000,
            "open": 393.96,
            "high": 394.17,
            "low": 391.53,
            "close": 392.3,
            "volume": 50932700
        },
        {
            "timestamp": 1613520000000,
            "open": 390.42,
            "high": 392.66,
            "low": 389.33,
            "close": 392.39,
            "volume": 52750400
        },
        {
            "timestamp": 1613606400000,
            "open": 389.59,
            "high": 391.515,
            "low": 387.74,
            "close": 390.72,
            "volume": 59712700
        },
        {
            "timestamp": 1613692800000,
            "open": 392.07,
            "high": 392.38,
            "low": 389.55,
            "close": 390.03,
            "volume": 83219200
        },
        {
            "timestamp": 1613952000000,
            "open": 387.06,
            "high": 389.62,
            "low": 386.74,
            "close": 387.03,
            "volume": 67348400
        },
        {
            "timestamp": 1614038400000,
            "open": 384.66,
            "high": 388.95,
            "low": 380.2,
            "close": 387.5,
            "volume": 107241900
        },
        {
            "timestamp": 1614124800000,
            "open": 386.33,
            "high": 392.23,
            "low": 385.27,
            "close": 391.77,
            "volume": 72394400
        },
        {
            "timestamp": 1614211200000,
            "open": 390.41,
            "high": 391.88,
            "low": 380.78,
            "close": 382.33,
            "volume": 146429000
        },
        {
            "timestamp": 1614297600000,
            "open": 384.35,
            "high": 385.58,
            "low": 378.23,
            "close": 380.36,
            "volume": 152657700
        },
        {
            "timestamp": 1614556800000,
            "open": 385.59,
            "high": 390.92,
            "low": 380.57,
            "close": 389.58,
            "volume": 105297000
        },
        {
            "timestamp": 1614643200000,
            "open": 389.82,
            "high": 390.07,
            "low": 386.0,
            "close": 386.54,
            "volume": 79539300
        },
        {
            "timestamp": 1614729600000,
            "open": 385.79,
            "high": 386.83,
            "low": 381.31,
            "close": 381.42,
            "volume": 119855900
        },
        {
            "timestamp": 1614816000000,
            "open": 381.22,
            "high": 384.0,
            "low": 371.88,
            "close": 376.7,
            "volume": 183171300
        },
        {
            "timestamp": 1614902400000,
            "open": 380.46,
            "high": 384.76,
            "low": 372.64,
            "close": 383.63,
            "volume": 152010000
        },
        {
            "timestamp": 1615161600000,
            "open": 384.66,
            "high": 387.68,
            "low": 381.42,
            "close": 381.72,
            "volume": 123084700
        },
        {
            "timestamp": 1615248000000,
            "open": 385.85,
            "high": 389.91,
            "low": 381.73,
            "close": 387.17,
            "volume": 113586000
        },
        {
            "timestamp": 1615334400000,
            "open": 389.69,
            "high": 391.4,
            "low": 388.17,
            "close": 389.58,
            "volume": 109909700
        },
        {
            "timestamp": 1615420800000,
            "open": 392.23,
            "high": 395.65,
            "low": 391.74,
            "close": 393.53,
            "volume": 86271500
        },
        {
            "timestamp": 1615507200000,
            "open": 392.07,
            "high": 394.21,
            "low": 391.2,
            "close": 394.06,
            "volume": 64653500
        },
        {
            "timestamp": 1615766400000,
            "open": 394.33,
            "high": 396.68,
            "low": 392.03,
            "close": 396.41,
            "volume": 73571900
        },
        {
            "timestamp": 1615852800000,
            "open": 397.07,
            "high": 397.83,
            "low": 395.08,
            "close": 395.91,
            "volume": 73715200
        },
        {
            "timestamp": 1615939200000,
            "open": 394.53,
            "high": 398.12,
            "low": 393.3,
            "close": 397.26,
            "volume": 97924400
        },
        {
            "timestamp": 1616025600000,
            "open": 394.48,
            "high": 396.72,
            "low": 390.75,
            "close": 391.48,
            "volume": 115349100
        },
        {
            "timestamp": 1616112000000,
            "open": 389.88,
            "high": 391.569,
            "low": 387.15,
            "close": 389.48,
            "volume": 113624400
        },
        {
            "timestamp": 1616371200000,
            "open": 390.03,
            "high": 394.07,
            "low": 389.97,
            "close": 392.59,
            "volume": 73750300
        },
        {
            "timestamp": 1616457600000,
            "open": 391.91,
            "high": 393.46,
            "low": 388.66,
            "close": 389.5,
            "volume": 90445500
        },
        {
            "timestamp": 1616544000000,
            "open": 391.0,
            "high": 392.75,
            "low": 387.47,
            "close": 387.52,
            "volume": 97537100
        },
        {
            "timestamp": 1616630400000,
            "open": 385.98,
            "high": 390.55,
            "low": 383.9,
            "close": 389.7,
            "volume": 115998100
        },
        {
            "timestamp": 1616716800000,
            "open": 390.93,
            "high": 396.41,
            "low": 390.29,
            "close": 395.98,
            "volume": 114361800
        },
        {
            "timestamp": 1616976000000,
            "open": 394.4,
            "high": 396.75,
            "low": 392.81,
            "close": 395.78,
            "volume": 108086200
        },
        {
            "timestamp": 1617062400000,
            "open": 394.42,
            "high": 395.45,
            "low": 393.02,
            "close": 394.73,
            "volume": 76235000
        },
        {
            "timestamp": 1617148800000,
            "open": 395.34,
            "high": 398.0,
            "low": 395.31,
            "close": 396.33,
            "volume": 112707500
        },
        {
            "timestamp": 1617235200000,
            "open": 398.4,
            "high": 400.67,
            "low": 398.18,
            "close": 400.61,
            "volume": 99642100
        },
        {
            "timestamp": 1617321600000,
            "open": 400.61,
            "high": 400.61,
            "low": 400.61,
            "close": 400.61,
            "volume": 0
        },
        {
            "timestamp": 1617580800000,
            "open": 403.46,
            "high": 406.94,
            "low": 403.38,
            "close": 406.36,
            "volume": 91684700
        },
        {
            "timestamp": 1617667200000,
            "open": 405.76,
            "high": 407.24,
            "low": 405.4,
            "close": 406.12,
            "volume": 61833100
        },
        {
            "timestamp": 1617753600000,
            "open": 405.94,
            "high": 406.96,
            "low": 405.45,
            "close": 406.59,
            "volume": 55727000
        },
        {
            "timestamp": 1617840000000,
            "open": 407.93,
            "high": 408.58,
            "low": 406.93,
            "close": 408.52,
            "volume": 57840700
        },
        {
            "timestamp": 1617926400000,
            "open": 408.39,
            "high": 411.67,
            "low": 408.26,
            "close": 411.49,
            "volume": 61082400
        },
        {
            "timestamp": 1618185600000,
            "open": 410.85,
            "high": 411.93,
            "low": 410.2,
            "close": 411.64,
            "volume": 56679300
        },
        {
            "timestamp": 1618272000000,
            "open": 411.53,
            "high": 413.53,
            "low": 411.12,
            "close": 412.86,
            "volume": 56533900
        },
        {
            "timestamp": 1618358400000,
            "open": 412.83,
            "high": 413.96,
            "low": 410.87,
            "close": 411.45,
            "volume": 61579900
        },
        {
            "timestamp": 1618444800000,
            "open": 413.74,
            "high": 416.16,
            "low": 413.69,
            "close": 415.87,
            "volume": 60192600
        },
        {
            "timestamp": 1618531200000,
            "open": 417.25,
            "high": 417.91,
            "low": 415.73,
            "close": 417.26,
            "volume": 82025100
        }
    ]
};

const data2 = {
    "data": [{
            "timestamp": 1609459200000,
            "open": 30.18,
            "high": 30.18,
            "low": 30.18,
            "close": 30.18,
            "volume": 0
        },
        {
            "timestamp": 1609718400000,
            "open": 30.32,
            "high": 30.435,
            "low": 29.4002,
            "close": 29.7,
            "volume": 31421500
        },
        {
            "timestamp": 1609804800000,
            "open": 30.09,
            "high": 30.95,
            "low": 29.82,
            "close": 30.53,
            "volume": 37360000
        },
        {
            "timestamp": 1609891200000,
            "open": 31.9,
            "high": 33.0,
            "low": 31.79,
            "close": 32.69,
            "volume": 73507500
        },
        {
            "timestamp": 1609977600000,
            "open": 33.58,
            "high": 34.2,
            "low": 33.32,
            "close": 33.43,
            "volume": 50634100
        },
        {
            "timestamp": 1610064000000,
            "open": 33.61,
            "high": 33.65,
            "low": 32.67,
            "close": 33.19,
            "volume": 32324700
        },
        {
            "timestamp": 1610323200000,
            "open": 32.64,
            "high": 33.56,
            "low": 32.32,
            "close": 33.24,
            "volume": 33798500
        },
        {
            "timestamp": 1610409600000,
            "open": 34.0,
            "high": 34.52,
            "low": 33.66,
            "close": 33.94,
            "volume": 59146400
        },
        {
            "timestamp": 1610496000000,
            "open": 33.82,
            "high": 34.26,
            "low": 33.63,
            "close": 33.8,
            "volume": 35734800
        },
        {
            "timestamp": 1610582400000,
            "open": 34.07,
            "high": 35.1,
            "low": 34.01,
            "close": 34.75,
            "volume": 55856800
        },
        {
            "timestamp": 1610668800000,
            "open": 33.08,
            "high": 33.5,
            "low": 31.82,
            "close": 32.04,
            "volume": 91993000
        },
        {
            "timestamp": 1610928000000,
            "open": 32.04,
            "high": 32.04,
            "low": 32.04,
            "close": 32.04,
            "volume": 0
        },
        {
            "timestamp": 1611014400000,
            "open": 32.41,
            "high": 33.04,
            "low": 32.28,
            "close": 32.63,
            "volume": 43675300
        },
        {
            "timestamp": 1611100800000,
            "open": 32.78,
            "high": 32.83,
            "low": 32.3,
            "close": 32.46,
            "volume": 29949800
        },
        {
            "timestamp": 1611187200000,
            "open": 32.32,
            "high": 32.43,
            "low": 31.92,
            "close": 32.0,
            "volume": 28260200
        },
        {
            "timestamp": 1611273600000,
            "open": 31.34,
            "high": 32.06,
            "low": 31.15,
            "close": 31.9,
            "volume": 24476000
        },
        {
            "timestamp": 1611532800000,
            "open": 31.88,
            "high": 32.35,
            "low": 31.61,
            "close": 32.24,
            "volume": 28509900
        },
        {
            "timestamp": 1611619200000,
            "open": 32.49,
            "high": 32.53,
            "low": 31.36,
            "close": 31.38,
            "volume": 28026400
        },
        {
            "timestamp": 1611705600000,
            "open": 30.92,
            "high": 31.03,
            "low": 29.92,
            "close": 30.17,
            "volume": 45048200
        },
        {
            "timestamp": 1611792000000,
            "open": 30.52,
            "high": 31.05,
            "low": 30.31,
            "close": 30.81,
            "volume": 28763000
        },
        {
            "timestamp": 1611878400000,
            "open": 30.77,
            "high": 31.19,
            "low": 29.82,
            "close": 29.88,
            "volume": 39492200
        },
        {
            "timestamp": 1612137600000,
            "open": 30.14,
            "high": 30.22,
            "low": 29.68,
            "close": 29.99,
            "volume": 23709700
        },
        {
            "timestamp": 1612224000000,
            "open": 30.43,
            "high": 31.19,
            "low": 30.38,
            "close": 30.75,
            "volume": 25292300
        },
        {
            "timestamp": 1612310400000,
            "open": 30.72,
            "high": 31.77,
            "low": 30.61,
            "close": 31.7,
            "volume": 28501100
        },
        {
            "timestamp": 1612396800000,
            "open": 31.87,
            "high": 32.85,
            "low": 31.8,
            "close": 32.66,
            "volume": 30823100
        },
        {
            "timestamp": 1612483200000,
            "open": 33.0,
            "high": 33.19,
            "low": 32.51,
            "close": 32.56,
            "volume": 24903100
        },
        {
            "timestamp": 1612742400000,
            "open": 32.84,
            "high": 33.57,
            "low": 30.77,
            "close": 33.4,
            "volume": 29208600
        },
        {
            "timestamp": 1612828800000,
            "open": 33.21,
            "high": 33.4,
            "low": 32.91,
            "close": 33.26,
            "volume": 23537800
        },
        {
            "timestamp": 1612915200000,
            "open": 33.48,
            "high": 33.69,
            "low": 33.09,
            "close": 33.2,
            "volume": 22673700
        },
        {
            "timestamp": 1613001600000,
            "open": 33.2,
            "high": 33.34,
            "low": 32.37,
            "close": 32.72,
            "volume": 22388800
        },
        {
            "timestamp": 1613088000000,
            "open": 32.65,
            "high": 33.6201,
            "low": 32.65,
            "close": 33.53,
            "volume": 34461800
        },
        {
            "timestamp": 1613347200000,
            "open": 33.53,
            "high": 33.53,
            "low": 33.53,
            "close": 33.53,
            "volume": 0
        },
        {
            "timestamp": 1613433600000,
            "open": 34.07,
            "high": 34.93,
            "low": 34.0,
            "close": 34.79,
            "volume": 36451600
        },
        {
            "timestamp": 1613520000000,
            "open": 34.34,
            "high": 37.45,
            "low": 34.03,
            "close": 36.59,
            "volume": 80307100
        },
        {
            "timestamp": 1613606400000,
            "open": 36.44,
            "high": 37.357,
            "low": 36.18,
            "close": 36.96,
            "volume": 43334700
        },
        {
            "timestamp": 1613692800000,
            "open": 37.13,
            "high": 37.85,
            "low": 37.03,
            "close": 37.83,
            "volume": 39014100
        },
        {
            "timestamp": 1613952000000,
            "open": 37.67,
            "high": 37.92,
            "low": 37.1,
            "close": 37.26,
            "volume": 34683600
        },
        {
            "timestamp": 1614038400000,
            "open": 37.59,
            "high": 37.77,
            "low": 36.6,
            "close": 37.14,
            "volume": 36790100
        },
        {
            "timestamp": 1614124800000,
            "open": 37.24,
            "high": 38.34,
            "low": 37.14,
            "close": 38.29,
            "volume": 42757900
        },
        {
            "timestamp": 1614211200000,
            "open": 38.68,
            "high": 38.68,
            "low": 37.3,
            "close": 37.56,
            "volume": 37221900
        },
        {
            "timestamp": 1614297600000,
            "open": 37.1,
            "high": 37.41,
            "low": 35.93,
            "close": 36.17,
            "volume": 39461300
        },
        {
            "timestamp": 1614556800000,
            "open": 37.11,
            "high": 37.42,
            "low": 36.74,
            "close": 37.09,
            "volume": 28058200
        },
        {
            "timestamp": 1614643200000,
            "open": 37.15,
            "high": 37.45,
            "low": 36.99,
            "close": 37.14,
            "volume": 19683600
        },
        {
            "timestamp": 1614729600000,
            "open": 37.35,
            "high": 38.66,
            "low": 37.35,
            "close": 37.69,
            "volume": 35355900
        },
        {
            "timestamp": 1614816000000,
            "open": 37.62,
            "high": 38.0,
            "low": 36.36,
            "close": 37.16,
            "volume": 42927200
        },
        {
            "timestamp": 1614902400000,
            "open": 37.87,
            "high": 38.12,
            "low": 36.34,
            "close": 37.43,
            "volume": 34555800
        },
        {
            "timestamp": 1615161600000,
            "open": 37.95,
            "high": 38.88,
            "low": 37.77,
            "close": 38.67,
            "volume": 38248200
        },
        {
            "timestamp": 1615248000000,
            "open": 38.17,
            "high": 38.8,
            "low": 37.48,
            "close": 38.13,
            "volume": 35842300
        },
        {
            "timestamp": 1615334400000,
            "open": 38.61,
            "high": 39.7,
            "low": 38.28,
            "close": 39.58,
            "volume": 38438700
        },
        {
            "timestamp": 1615420800000,
            "open": 39.22,
            "high": 39.59,
            "low": 38.61,
            "close": 38.88,
            "volume": 30599700
        },
        {
            "timestamp": 1615507200000,
            "open": 39.5,
            "high": 40.02,
            "low": 39.42,
            "close": 39.97,
            "volume": 28754000
        },
        {
            "timestamp": 1615766400000,
            "open": 40.07,
            "high": 40.23,
            "low": 39.17,
            "close": 39.7,
            "volume": 25899700
        },
        {
            "timestamp": 1615852800000,
            "open": 39.37,
            "high": 39.49,
            "low": 38.72,
            "close": 39.35,
            "volume": 24662900
        },
        {
            "timestamp": 1615939200000,
            "open": 39.68,
            "high": 40.44,
            "low": 39.21,
            "close": 39.84,
            "volume": 33526900
        },
        {
            "timestamp": 1616025600000,
            "open": 40.15,
            "high": 41.54,
            "low": 40.15,
            "close": 40.81,
            "volume": 57420500
        },
        {
            "timestamp": 1616112000000,
            "open": 39.94,
            "high": 40.065,
            "low": 39.22,
            "close": 39.63,
            "volume": 60291800
        },
        {
            "timestamp": 1616371200000,
            "open": 39.26,
            "high": 39.31,
            "low": 38.62,
            "close": 38.97,
            "volume": 32207000
        },
        {
            "timestamp": 1616457600000,
            "open": 38.47,
            "high": 39.05,
            "low": 38.05,
            "close": 38.24,
            "volume": 32473000
        },
        {
            "timestamp": 1616544000000,
            "open": 38.36,
            "high": 39.02,
            "low": 38.11,
            "close": 38.12,
            "volume": 24195700
        },
        {
            "timestamp": 1616630400000,
            "open": 37.99,
            "high": 39.36,
            "low": 37.78,
            "close": 39.3,
            "volume": 28765500
        },
        {
            "timestamp": 1616716800000,
            "open": 39.9,
            "high": 40.23,
            "low": 39.17,
            "close": 39.76,
            "volume": 29155200
        },
        {
            "timestamp": 1616976000000,
            "open": 38.58,
            "high": 39.35,
            "low": 37.9,
            "close": 38.44,
            "volume": 38392000
        },
        {
            "timestamp": 1617062400000,
            "open": 38.54,
            "high": 40.08,
            "low": 38.47,
            "close": 39.39,
            "volume": 36132900
        },
        {
            "timestamp": 1617148800000,
            "open": 39.27,
            "high": 39.63,
            "low": 38.92,
            "close": 39.07,
            "volume": 25827900
        },
        {
            "timestamp": 1617235200000,
            "open": 38.96,
            "high": 39.65,
            "low": 38.92,
            "close": 39.63,
            "volume": 22702100
        },
        {
            "timestamp": 1617321600000,
            "open": 39.63,
            "high": 39.63,
            "low": 39.63,
            "close": 39.63,
            "volume": 0
        },
        {
            "timestamp": 1617580800000,
            "open": 40.03,
            "high": 40.33,
            "low": 39.32,
            "close": 39.48,
            "volume": 21293400
        },
        {
            "timestamp": 1617667200000,
            "open": 39.42,
            "high": 39.9,
            "low": 39.26,
            "close": 39.85,
            "volume": 20965000
        },
        {
            "timestamp": 1617753600000,
            "open": 39.84,
            "high": 40.09,
            "low": 39.63,
            "close": 39.99,
            "volume": 19382600
        },
        {
            "timestamp": 1617840000000,
            "open": 39.87,
            "high": 40.2,
            "low": 39.33,
            "close": 40.03,
            "volume": 20842400
        },
        {
            "timestamp": 1617926400000,
            "open": 40.34,
            "high": 40.79,
            "low": 40.25,
            "close": 40.5,
            "volume": 28360300
        },
        {
            "timestamp": 1618185600000,
            "open": 40.46,
            "high": 40.89,
            "low": 40.4,
            "close": 40.77,
            "volume": 21091600
        },
        {
            "timestamp": 1618272000000,
            "open": 40.5,
            "high": 40.51,
            "low": 39.7,
            "close": 39.79,
            "volume": 29319900
        },
        {
            "timestamp": 1618358400000,
            "open": 39.7,
            "high": 42.18,
            "low": 39.06,
            "close": 41.99,
            "volume": 64908400
        },
        {
            "timestamp": 1618444800000,
            "open": 42.1,
            "high": 42.26,
            "low": 41.03,
            "close": 42.24,
            "volume": 44136400
        },
        {
            "timestamp": 1618531200000,
            "open": 42.67,
            "high": 44.13,
            "low": 42.58,
            "close": 43.84,
            "volume": 57054500
        }
    ]
}

const responsivefy = svg => {
    // get container + svg aspect ratio
    const container = d3.select(svg.node().parentNode),
        width = parseInt(svg.style('width')),
        height = parseInt(svg.style('height')),
        aspect = width / height;

    // get width of container and resize svg to fit it
    const resize = () => {
        var targetWidth = parseInt(container.style('width'));
        svg.attr('width', targetWidth);
        svg.attr('height', Math.round(targetWidth / aspect));
    };

    // add viewBox and preserveAspectRatio properties,
    // and call resize so that svg resizes on inital page load
    svg
        .attr('viewBox', '0 0 ' + width + ' ' + height)
        .attr('perserveAspectRatio', 'xMinYMid')
        .call(resize);

    // to register multiple listeners for same event type,
    // you need to add namespace, i.e., 'click.foo'
    // necessary if you call invoke this function for multiple svgs
    // api docs: https://github.com/mbostock/d3/wiki/Selections#on
    d3.select(window).on('resize.' + container.attr('id'), resize);
};

const drawChart = (control, active) => {
    const margin = { top: 50, right: 80, bottom: 50, left: 80 };
    const width = document.getElementById('chart').clientWidth - margin.left - margin.right; // Use the window's width
    const height = (window.innerHeight * 0.8) - margin.top - margin.bottom; // Use the window's height

    // add chart SVG to the page
    const svg = d3
        .select('#chart')
        .append('svg')
        .attr('width', width + margin['left'] + margin['right'])
        .attr('height', height + margin['top'] + margin['bottom'])
        .call(responsivefy)
        .append('g')
        .attr('transform', `translate(${margin['left']}, ${margin['top']})`);

    // create the axes component
    const combined = [...control, ...active];

    // find data range
    const xMin = d3.min(combined, d => {
        return d['timestamp'];
    });

    const xMax = d3.max(combined, d => {
        return d['timestamp'];
    });

    const yMin = d3.min(combined, d => {
        return d['normalized'];
    });

    const yMax = d3.max(combined, d => {
        return d['normalized'];
    });

    // scale using range
    const xScale = d3
        .scaleTime()
        .domain([xMin, xMax])
        .range([0, width]);

    const yScale = d3
        .scaleLinear()
        .domain([yMin * 0.99, yMax])
        .range([height, 0]);

    svg
        .append('g')
        .attr('id', 'xAxis')
        .attr('transform', `translate(0, ${height})`)
        .call(d3.axisBottom(xScale));

    svg
        .append('g')
        .attr('id', 'yAxis')
        .call(d3.axisLeft(yScale));

    svg.append("text")
        .attr("text-anchor", "end")
        .attr("y", 6)
        .attr("dy", ".75em")
        .attr("transform", "rotate(-90)")
        .text("USD");

    const line = d3
        .line()
        .x(d => {
            return xScale(d['timestamp']);
        })
        .y(d => {
            return yScale(d['normalized']);
        })
        .curve(d3.curveBasis);

    svg
        .append('path')
        .data([control])
        .style('fill', 'none')
        .attr('id', 'spyChart')
        .attr('stroke', 'grey')
        // .attr('stroke-width', '0.1')
        .attr('d', line);

    svg
        .append('path')
        .data([active])
        .style('fill', 'none')
        .attr('id', 'activeChart')
        .attr('stroke', 'steelblue')
        .attr('stroke-width', '2')
        .attr('d', line);
}

const normalize = (data, base, key) => {
    const earliestPoint = d3.least(data, (a) => a.timestamp);
    const normalized = [];

    for (let i = 0; i < data.length; i++) {
        const current = {...data[i] };
        const normValue = base * current[key] / earliestPoint[key];
        current.normalized = normValue;
        normalized.push(current);
    }

    return normalized;
}

d3.json('data/spy.json').then(spy => {
    d3.json('data/wfc.json').then(wfc => {
        drawChart(
            normalize(spy.data, 10000, 'close'),
            normalize(wfc.data, 10000, 'close')
        );
    })
});